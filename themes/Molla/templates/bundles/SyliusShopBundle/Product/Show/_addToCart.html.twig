{% set product = order_item.variant.product %}

{% set message = "order.interested"|trans ~ " " ~ product.name %}
{% set message = message|url_encode %}

{% form_theme form '@SyliusShop/Form/theme.html.twig' %}


<div class="product-details" id="sylius-product-selecting-variant">
	{{ sonata_block_render_event('sylius.shop.product.show.before_add_to_cart', {'product': product, 'order_item': order_item}) }}

	{{ form_start(form, {
        'action': path('sylius_shop_ajax_cart_add_item', {'productId': product.id}),
        'attr': {
            'id': 'sylius-product-adding-to-cart',
            'class': 'ui loadable form',
            'novalidate': 'novalidate',
            'data-redirect': path(configuration.getRedirectRoute('summary'))
        }
    }) }}

	{{ form_errors(form) }}

	<div class="ui red label bottom pointing hidden sylius-validation-error" id="sylius-cart-validation-error"></div>

	{% if not product.simple %}
		{% if product.variantSelectionMethodChoice %}
			{% include '@SyliusShop/Product/Show/_variants.html.twig' %}
		{% else %}
			{% include '@SyliusShop/Product/Show/_options.html.twig' %}
		{% endif %}
	{% endif %}

	{{ form_row(form.cartItem.quantity) }}

	{{ sonata_block_render_event('sylius.shop.product.show.add_to_cart_form', {
        'product': product,
        'order_item': order_item
    }) }}

	<div class="field">
		{{ form.addToWishlist.vars.label|trans }}
		{{ form_widget(form.wishlists) }}
	</div>
	<div class="ui hidden divider"></div>

	<div class="product-details-action d-flex">
		{% if product.getVendor() is null or product.getVendor().isEnabled() %}
		<button type="submit" class="btn-product btn-cart">
			<span>{{ 'sylius.ui.add_to_cart'|trans }}</span>
		</button>
		{% endif %}

		<div class="details-action-wrapper">
			<button type="submit" class="btn-product btn-wishlist" name="{{ form.addToWishlist.vars.full_name }}" title="Wishlist">
				<span>{{ form.addToWishlist.vars.label|trans }}</span>
			</button>
			<a href="https://wa.me/237694694792?text={{ message }}" class="btn-product btn-success" title="{{ 'order.on.whatsApp'|trans }}">
				<span>{{ 'order.on.whatsApp'|trans }}</span>
			</a>
		</div>
	</div>

	{{ form_row(form._token) }}
	{{ form_end(form, {'render_rest': false}) }}
</div>
